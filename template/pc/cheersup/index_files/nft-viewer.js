!function(){"use strict";function t(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,r)}return o}function e(e){for(var o=1;o<arguments.length;o++){var n=null!=arguments[o]?arguments[o]:{};o%2?t(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function r(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}function n(t){return n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(t)}function i(t,e){return i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},i(t,e)}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function s(t,e,o){return s=a()?Reflect.construct:function(t,e,o){var r=[null];r.push.apply(r,e);var n=new(Function.bind.apply(t,r));return o&&i(n,o.prototype),n},s.apply(null,arguments)}function c(t){var e="function"==typeof Map?new Map:void 0;return c=function(t){if(null===t||(o=t,-1===Function.toString.call(o).indexOf("[native code]")))return t;var o;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return s(t,arguments,n(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),i(r,t)},c(t)}function u(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=t;return Object.keys(e).forEach((function(t){var r=e[t];o=o.replace(new RegExp("{{".concat(t,"}}"),"g"),r)})),o}function d(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!t||0===t.length)return"";var e='<source src="{{src}}" >';return t.map((function(t){return t?l(e,{src:t}):""})).join("")}var p='<div class="box">\n  <img class="img" src="{{src}}" alt="{{alt}}" title="{{title}}" />\n</div><style>:host {display: inline-block} .box {height: 100%; line-height:0; font-size: 0} .img {width: 100%; height: 100%; object-fit: cover;}</style>',f='<div class="box">\n  <video {{autoplay}} class="video" {{controls}} controlslist="nodownload" loop playsinline poster="{{poster}}" {{muted}} preload="metadata" >\n    {{source}}\n  </video>\n</div><style>:host {display: inline-block} .box {height: 100%} .video {width: 100%; height: 100%}</style>',h='<div class="box">\n  <img class="poster" src="{{poster}}" alt="{{alt}}" title="{{title}}" />\n  <audio {{autoplay}} class="audio" {{muted}} {{controls}} controlslist="nodownload" loop preload="none" >\n    {{source}}\n  </audio>\n</div><style>:host {display: inline-block; position: relative;} .box {height: 100%} .poster {width: 100%; height: 100%; object-fit: cover;} .audio {height: 54px; outline: none; position: absolute; bottom: 0px; left: 0px; width: 100%;} audio:not([controls]) {display: none !important;}</style>',y='<div class="box">\n  <model-viewer class="model-viewer" src="{{src}}" auto-rotate autoplay camera-controls ar-status="not-presenting" poster="{{poster}}" alt="{{alt}}"></model-viewer>\n</div><style>:host {display: inline-block} .box {height: 100%} .model-viewer {width: 100%; height: 100%}</style>',b='<div class="box">\n  <div class="stage" title="{{title}}" ></div>\n</div><style>:host {display: inline-block} .box {height: 100%; line-height: 0; font-size: 0} .stage {width: 100%; height: 100%; background-image: url({{src}}); background-repeat: no-repeat;}</style>';function v(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=t.type;if(!["image","video","audio","model","animate"].includes(o))return console.error("unknow type ".concat(o)),"";var r="";switch(o){case"image":r=p;break;case"video":r=f;break;case"audio":r=h;break;case"model":r=y;break;case"animate":r=b}var n=e({},t),i="";if("video"===n.type||"audio"===n.type)if(n.source){var a=n.source.split(";");i=d(a)}else n.src&&(i=d([n.src]));return i&&(n.source=i),l(r,n)}var m={model:!1};var g,w=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&i(t,e)}(f,t);var e,r,s,c,l,p=(e=f,r=a(),function(){var t,o=n(e);if(r){var i=n(this).constructor;t=Reflect.construct(o,arguments,i)}else t=o.apply(this,arguments);return u(this,t)});function f(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),(t=p.call(this)).shadowDom=t.attachShadow({mode:"closed"}),t}return s=f,c=[{key:"connectedCallback",value:function(){this.render()}},{key:"attributeChangedCallback",value:function(t,e,o){var r=this;"type"===t&&e!==o&&null!==e&&function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return new Promise((function(e){setTimeout(e,t)}))}(100).then((function(){r.render()})),["src","source","poster","duration","delay"].includes(t)&&e!==o&&null!==e&&this.updateContent(t,o)}},{key:"render",value:function(){var t=this,e={type:this.getAttribute("type")||"image",poster:this.getAttribute("poster")||"",src:this.getAttribute("src")||"",title:this.getAttribute("title")||"",alt:this.getAttribute("alt")||"",controls:null!==this.getAttribute("controls")?"controls":"",autoplay:null!==this.getAttribute("autoplay")?"autoplay":"",source:this.getAttribute("source"),frames:this.getAttribute("frames")||"",delay:parseInt(this.getAttribute("delay")||0),duration:parseInt(this.getAttribute("duration")||0),backgroundSize:this.getAttribute("backgroundSize")||"",muted:null!==this.getAttribute("muted")?"muted":""},o=v(e),r=document.createElement("div");r.setAttribute("class","viewer-wrapper"),r.style.height="100%",r.insertAdjacentHTML("beforeend",o),this.type=e.type,this.root=r,"model"!==e.type||m.model?(this.shadowDom.innerHTML="",this.shadowDom.appendChild(r)):new Promise((function(t){var e=document.createElement("script");e.setAttribute("type","module"),e.setAttribute("src","//unpkg.com/@google/model-viewer/dist/model-viewer.min.js"),e.addEventListener("load",(function(){t()})),document.head.appendChild(e)})).then((function(){m.model=!0,t.shadowDom.innerHTML="",t.shadowDom.appendChild(r)})),"animate"===e.type&&this.setAnimate(e.src,e.frames,e.duration,e.delay,e.backgroundSize)}},{key:"play",value:function(){try{var t=this.root.querySelector("video, audio");t&&t.play()}catch(t){console.log(t)}}},{key:"stop",value:function(){try{var t=this.root.querySelector("video, audio");t&&t.pause()}catch(t){console.log(t)}}},{key:"updateContent",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if("audio"!==this.type){if("src"===t||"poster"===t){var o=this.root.querySelector("img, video, audio, model-viewer");o&&o.setAttribute(t,e)}else if("source"===t){var r=e.split(";"),n=d(r),i=this.root.querySelector("video");i&&(i.innerHTML=n,i.setAttribute("src",r[0]))}"animate"===this.type&&["duration","src","delay"].includes(t)&&this.setAnimate(this.getAttribute("src"),this.getAttribute("frames"),parseInt(this.getAttribute("duration")||0),parseInt(this.getAttribute("delay")||0),this.getAttribute("backgroundSize")||"")}else{if("src"===t){var a=this.root.querySelector("audio");a&&a.setAttribute(t,e)}if("poster"===t){var s=this.root.querySelector("img");s&&s.setAttribute("src",e)}if("source"===t){var c=e.split(";"),u=d(c),l=this.root.querySelector("audio");l&&(l.innerHTML=u,l.setAttribute("src",c[0]))}}}},{key:"setAnimate",value:function(t,e,o,r,n){var i=this,a=this.root.querySelector(".stage");if(clearTimeout(this.animateTimer),this.animate&&this.animate.stop&&this.animate.stop(),a&&t&&(a.style.backgroundImage="url(".concat(t,")"),a.style.backgroundPosition="0px 0px",a.style.backgroundSize=n||"auto",e)){var s=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=[];return"string"!=typeof t||""===t||t.split(";").forEach((function(t){var o=t.split(",");e.push({x:parseInt(o[0]||0),y:parseInt(o[1]||0)})})),e}(e);this.animateTimer=setTimeout((function(){i.animate=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,r=t.length,n=e?Math.floor(e/r):Math.floor(1/24*1e3),i=0,a=null,s=Date.now();function c(t,e,o){a=requestAnimationFrame((function(){var a=Date.now(),u=Math.floor((a-s)/n);u!==i&&(i=u%r,o&&o(t[i],i),0===i&&(s=Date.now())),c(t,e,o)}))}function u(){cancelAnimationFrame(a)}function l(){c(t,e,o)}return l(),{stop:u,start:l}}(s,o,(function(t){var e=t||{},o=e.x,r=void 0===o?0:o,n=e.y,i=void 0===n?0:n;a.style.backgroundPosition="-".concat(r,"px -").concat(i,"px")}))}),r||0)}}}],l=[{key:"observedAttributes",get:function(){return["type","src","source","poster","duration","delay","muted","autoplay"]}}],c&&o(s.prototype,c),l&&o(s,l),Object.defineProperty(s,"prototype",{writable:!1}),f}(c(HTMLElement));g=function(){window.customElements?window.customElements.define("nft-viewer",w):console.warn("browser not support to define web component")},"loading"!==document.readyState?g&&g():document.addEventListener("readystatechange",(function(){"interactive"===document.readyState&&g&&g()}))}();
